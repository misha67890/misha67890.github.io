!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(r,i,function(t){return e[t]}.bind(null,i));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=325)}({138:function(e,t,n){"use strict";function r(e){return se("<textarea>"+(e||"")+"</textarea>").value.replace(/</g,"&lt;").replace(/>/g,"&gt;")}function i(e){return e&&e.nodeType==Node.ELEMENT_NODE&&inArray(e.tagName.toLowerCase(),["cite","blockquote"])}function o(e){var t=domData(e,"type"),n=domData(e,"uuid");return[t,n]}function a(e,t){cur[e]=cur[e]||0,void 0===t?console.log(e,cur[e]):cur[e]>=t,cur[e]++}function s(e){return e&&hasClass(e,"_article_paragraph")}function l(e){if(e)try{var t=document.createRange();t.selectNodeContents(e);var n=window.getSelection();n.removeAllRanges(),n.addRange(t)}catch(r){}}function u(e,t){if(e)try{var n=document.createRange();t?(n.selectNodeContents(e),n.collapse(!1)):(n.setStart(e,0),n.setEnd(e,0));var r=window.getSelection();r.removeAllRanges(),r.addRange(n)}catch(i){}}function c(e){return e&&e.nodeType==Node.ELEMENT_NODE&&"BR"==e.tagName}function d(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:!1;if(e=e.substring(t,n),r&&r.length){var o=[],a=0;r.forEach(function(n){if(n-=t,!(0>=n||n>e.length)){var r=e.substring(a,n)+"<br/>";r=i?r:C(r),o.push(r),a=n}});var s=e.substring(a);return o.push(i?s:C(s)),""==o[o.length-1],o.join("")}return i?e:C(e)}function f(e){if(!e)return!1;for(var t=0;null!=(e=e.previousSibling);)t++;return t}function p(e){return e&&e.nodeType==Node.ELEMENT_NODE&&!!domData(e,"uuid")}function h(e){return e&&e.type&&e.type>=100}function _(e){return e&&e.sep}function g(){return++ae}function v(e){var t=void 0;return t=isObject(e)?e.type:e,inArray(t,[ee.ParagraphType.Header1,ee.ParagraphType.Header2,ee.ParagraphType.Header3])}function m(e){return e&&(e.type==ee.ParagraphType.NumericList||e.type==ee.ParagraphType.BulletList)}function y(e){e=e||{};var t={};return h(e)&&(t._uuid=e._uuid),t.lines=e.lines||[{text:"",decorations:{},brs:[]}],t.type=e.type?parseInt(e.type):ee.ParagraphType.Text,e.mediaId&&(t.mediaId=e.mediaId),e.sep&&(t.sep=e.sep),e.fromExtPage&&(t.fromExtPage=e.fromExtPage),t}function w(e){if(isArray(e))return e;var t=[];return each(e,function(e,n){t.push(intval(n))}),t.sort(),t}function b(){var e=window.getSelection();return e.rangeCount?[e.getRangeAt(0),e.isCollapsed,e]:[!1]}function C(e){return-1!=e.search(/^\s/)&&(e=" "+e.trimLeft()),-1!=e.search(/\s$/)&&(e=e.trimRight()+ne),e}function E(e){return e.replace(/\s\s+/g," ").replace(/\s/g," ")}function S(e){var t=e.slice();t.sort(function(e,t){return e[0]-t[0]});for(var n=0;n<t.length-1;){var r=t[n],i=t[n+1];r[1]>=i[0]?(r[1]=Math.max(r[1],i[1]),t.splice(n+1,1)):n++}return t}function T(e){return/\s/.test(e)}function x(e){return le.test(e)}function L(e){return/[a-zA-Z]/.test(e)}function O(e){return!hasClass(e,oe)}function k(){var e=window.getSelection();return e.focusNode}function N(e){var t=[];each(e,function(e,n){t.push(n)});var n=t.sort(function(e,t){return t[1]-e[1]})[0];return[n[1],n[2]]}function A(e){for(var t=e.parentNode,n=0;n<t.childNodes.length;n++)if(e==t.childNodes[n])return n;return-1}function B(e,t){e=e.toLowerCase();for(var n="",r=!1,i="-qwertyuiopasdfghjklzxcvbnm0123456789".split(""),o=0;o<e.length;o++)if(/\s/.test(e[o]))r||(n+="-",r=!0);else if(inArray(e[o],i))n+=e[o],r=!1;else{var a=ue[e.charCodeAt(o)];a&&(n+=a,r=!1)}return n=n.substr(0,t),n=n.replace(/-*$/,"").replace(/^-*/,"").replace(/-+/g,"-")}function j(e){var t=void 0,n=void 0,r=void 0;t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],r=new Uint8Array(t.length);for(var i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return new Blob([r],{type:n})}function P(e,t,n){function r(e){return e?o[e.split("?").shift().split(".").pop()]:null}var i=void 0;if("function"==typeof t&&(n=t,t={}),t=t||{},!e)return n(new Error("Pass in a IMG DOM node or a url as first param"));if("object"===("undefined"==typeof e?"undefined":te(e))&&"img"===e.tagName.toLowerCase()&&(i=e.src),"string"==typeof e&&(i=e),/^data:/.test(i)&&!t.convert)return void n(null,j(i));var o={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",svg:"image/svg+xml"};return t.type=o[t.type]||r(i),t.src=i,t.callback=n,t.name=i,t.type?void D(i,I.bind(null,t)):void n(new Error("Image type is not supported"))}function I(e,t,n){if(t)return void e.callback(t);var r=j(n);r.name=r.filename=e.name,e.callback(null,r)}function D(e,t){var n=document.createElement("canvas"),r=document.createElement("img");r.onload=function(){var e=n.getContext("2d");n.width=r.width,n.height=r.height,e.drawImage(r,0,0),t(null,n.toDataURL("image/png"))},r.addEventListener("error",function(){t(new Error("FailedToLoadImage"))}),n.getContext?(r.crossOrigin="anonymous",r.src=e):setTimeout(t,0,new Error("CanvasIsNotSupported"))}function R(){if(0!=ce.length&&de!=fe){de++;var e=ce.shift(),t=new Image;t.addEventListener("error",function(){e.cb(!0,!1,function(){de--,R()})}),t.addEventListener("load",function(){P(t,{},function(t,n){e.cb(t,n,function(){de--,R()})})}),t.src=e.src}}function M(e,t){ce.push({src:e,cb:t}),R()}function H(e){return e=trim(e),1==e.length&&e[0]==re}function U(e,t){if(!e)return!0;if(h(e))return!1;var n=e.lines;if(0==n.length)return!0;var r=t?trim(n[0].text):n[0].text;return!r}function z(e){return e.filter(function(e,t,n){return n.indexOf(e)===t})}function F(e,t,n){var r={};for(var i in e)e.hasOwnProperty(i)&&!function(){var o=[];e[i].forEach(function(e){t<e[1]&&e[0]<=n&&o.push([Math.max(e[0],t)-t,Math.min(n,e[1])-t,e[2]])}),r[i]=o}();return r}function W(e){e.brs=z(e.brs),e.brs[e.brs.length-1]==e.text.length&&e.brs.pop()}function $(e,t){var n=e.length;return 1==n&&e[n-1]==t?e.pop():n>1&&e[n-1]==t&&e[n-2]!=t&&e.pop(),e}function q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1],n=t?'data-sep="'+g()+'"':"";return se('<p class="'+oe+'" '+n+">"+e+"</p>")}function G(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:!0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:!0,i=t(e,r);if(void 0!==i)return i;for(var o=Array.prototype.slice.call(n?e.children:e.childNodes),a=void 0;a=o.shift();){var s=G(a,t,n,!1);if(void 0!==s)return s}}function V(e,t,n){var r=void 0,i=void 0,o=void 0,a=null,s=0;n||(n={});var l=function(){s=n.leading===!1?0:Date.now(),a=null,o=e.apply(r,i),a||(r=i=null)};return function(){var u=Date.now();s||n.leading!==!1||(s=u);var c=t-(u-s);return r=this,i=arguments,0>=c||c>t?(a&&(clearTimeout(a),a=null),s=u,o=e.apply(r,i),a||(r=i=null)):a||n.trailing===!1||(a=setTimeout(l,c)),o}}function Y(e){return/^[a-z0-9\-]+$/.test(e)?-1!=e.indexOf("--")?!1:"-"==e[0]||"-"==e[e.length-1]?!1:e.length>60?!1:!0:!1}function X(e,t,n){e.decorations&&each(e.decorations,function(e,r){r.forEach(function(e){e[0]>t&&(e[0]+=n),e[1]>t&&(e[1]+=n)})}),e.brs&&e.brs.forEach(function(n,r){n>t&&(e.brs[r]-=1)})}function Q(e,t){e.forEach(function(e){e.lines.forEach(function(e){for(var n=0,r=e.text.length;r>n;n++){var i=e.text.charCodeAt(n);i>=55296&&56319>=i&&(X(e,n,t),n+=1)}})})}function K(e){return/^(https?:\/\/)?([a-z0-9_\-.]+\.)?vk.com(\/.*)?/.test(e)}function Z(e){var t=e;try{t=decodeURIComponent(e)}catch(n){t=e}return t}function J(e){for(var t=0,n=e.children.length;n>t;t++)if(he.indexOf(e.children[t].tagName)>=0)return!0;return!1}n.r(t),n.d(t,"NBSP",function(){return ne}),n.d(t,"CURSOR_MARKER_START",function(){return re}),n.d(t,"CURSOR_MARKER_END",function(){return ie}),n.d(t,"ArticleEditorParagraphClass",function(){return oe}),n.d(t,"replaceParagraphEntities",function(){return r}),n.d(t,"isQuoteEl",function(){return i}),n.d(t,"paragraphElProperties",function(){return o}),n.d(t,"deb",function(){return a}),n.d(t,"isParagraphEl",function(){return s}),n.d(t,"selectEl",function(){return l}),n.d(t,"focusEl",function(){return u}),n.d(t,"isBR",function(){return c}),n.d(t,"prepareLineText",function(){return d}),n.d(t,"getElementIndex",function(){return f}),n.d(t,"isObjectParagraphEl",function(){return p}),n.d(t,"isObjectParagraph",function(){return h}),n.d(t,"hasSeparator",function(){return _}),n.d(t,"genSepatorId",function(){return g}),n.d(t,"isHeaderParagraph",function(){return v}),n.d(t,"isListParagraph",function(){return m}),n.d(t,"buildParagraph",function(){return y}),n.d(t,"convertBRsToArray",function(){return w}),n.d(t,"getRange",function(){return b}),n.d(t,"prepareSpacesWithSpaces",function(){return C}),n.d(t,"cleanTextSpaces",function(){return E}),n.d(t,"mergeRanges",function(){return S}),n.d(t,"isWhiteSpaceChar",function(){return T}),n.d(t,"isCyrillicChar",function(){return x}),n.d(t,"isLatinChar",function(){return L}),n.d(t,"isAlienParagraphEl",function(){return O}),n.d(t,"getFocusedElement",function(){return k}),n.d(t,"getPhotoSize",function(){return N}),n.d(t,"childNodeIndex",function(){return A}),n.d(t,"generateLatinizedName",function(){return B}),n.d(t,"dataURItoBlob",function(){return j}),n.d(t,"imageToBlob",function(){return P}),n.d(t,"queuePhotoProcess",function(){return M}),n.d(t,"justCursorInString",function(){return H}),n.d(t,"isParagraphEmpty",function(){return U}),n.d(t,"arrayUnique",function(){return z}),n.d(t,"decorationsSlice",function(){return F}),n.d(t,"cleanLineBRs",function(){return W}),n.d(t,"cleanBRs",function(){return $}),n.d(t,"createParagraphEl",function(){return q}),n.d(t,"traverseTree",function(){return G}),n.d(t,"throttle",function(){return V}),n.d(t,"isPublishNameCorrect",function(){return Y}),n.d(t,"correctRealIndexes",function(){return Q}),n.d(t,"isVKUrl",function(){return K}),n.d(t,"decodeURL",function(){return Z}),n.d(t,"BlockElements",function(){return he}),n.d(t,"hasBlockElements",function(){return J});var ee=n(474),te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ne="&nbsp;",re="​",ie="‌",oe="_article_p",ae=0,le=/[\u0400-\u04FF]/,ue={1072:"a",1073:"b",1074:"v",1075:"g",1076:"d",1077:"e",1105:"e",1078:"zh",1079:"z",1080:"i",1081:"i",1082:"k",1083:"l",1084:"m",1085:"n",1086:"o",1087:"p",1088:"r",1089:"s",1090:"t",1091:"u",1092:"f",1093:"h",1094:"c",1095:"ch",1096:"sh",1097:"sch",1099:"y",1101:"e",1102:"u",1103:"ya"},ce=[],de=0,fe=2,pe="div p footer form h1 h2 h3 h4 h5 h6 header hgroup hr main nav output pre section table tfoot address article aside blockquote canvas dd dl dt fieldset figcaption figure",he=pe.toUpperCase().split(" ")},145:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.r(t);var i=n(449),o="article_ed_layer__list_item_current",a="article_ed_layer__list_loading",s=function(){function e(t,n,i,o,a){var s=this;r(this,e),this._onArticleSelected=a,this._getEditor=n,this._ownerId=t,this._options=o,this._scollers=[],this.update(),this._tt=new ElementTooltip(i,{appendToParent:!0,cls:"eltt_fancy",centerShift:10,offset:[0,-10],content:this._contentEl,autoShow:!1,onShow:function(){s.updateCurrent(s._getEditor().getArticleId())}})}return e.prototype.update=function(){var e=this;this._buildContent(),clearTimeout(this._loadTO),this._loadTO=setTimeout(function(){ajax.post("al_articles.php",{act:"articles_list",owner_id:e._ownerId},{onDone:function(t){e._contentEl.innerHTML=t,e.updateCurrent(),e._initScroller()}})},50)},e.prototype._updateScrollers=function(){this._scollers.forEach(function(e){e.update()})},e.prototype._initScroller=function(){var e=this;this._scollers.forEach(function(e){e&&e.destroy()}),this._scollers=[],each(geByClass("article_ed_layer__list_content",this._contentEl),function(t,n){var r=new uiScroll(n,{global:!0,stopScrollPropagation:!0,stopScrollPropagationAlways:!0});e._scollers.push(r)})},e.prototype.setCurrentLoading=function(e){if(e){var t=Object(i.geByClass1)(o,this._contentEl);showProgress(t),Object(i.addClass)(this._contentEl,a)}else hideProgress(this._contentEl),Object(i.removeClass)(this._contentEl,a);this._isLoading=e},e.prototype.updateCurrent=function(e,t){if(void 0!==e)this._currentArticleId=e;else{if(!this._currentArticleId)return;e=this._currentArticleId}Object(i.removeClass)(Object(i.geByClass1)(o,this._contentEl),o);var n=Object(i.domQuery1)('[data-article-id="'+e+'"]',this._contentEl);n&&(Object(i.addClass)(n,o),t&&(Object(i.geByClass1)("article_ed_layer__list_item_title",n).innerHTML=t),this._getEditor().isLocked()&&Object(i.re)(Object(i.geByClass1)("article_ed_layer__list_item_delete",n))),this._updateScrollers()},e.prototype._deleteDraft=function(e,t){ajax.post("al_articles.php",{act:"delete_draft",article_owner_id:this._ownerId,article_id:e,hash:t},{onDone:function(){}})},e.prototype._hide=function(){this._tt.hide()},e.prototype._buildContent=function(){var e=this;return this._contentEl?this._contentEl:(this._contentEl=Object(i.se)('<div class="article_ed_layer__articles_list_tt_content"></div>'),this._contentEl.addEventListener("click",function(t){var n=Object(i.domClosest)("ui_tab",t.target);if(n)return Object(i.hide)(Object(i.geByClass1)("article_ed_layer__list_content_drafts")),Object(i.hide)(Object(i.geByClass1)("article_ed_layer__list_content_published")),Object(i.show)(Object(i.geByClass1)("article_ed_layer__list_content_"+Object(i.domData)(n,"id"))),void e._updateScrollers();if(!e._isLoading){var r=Object(i.domClosest)("article_ed_layer__list_item",t.target),o=Object(i.domClosest)("article_ed_layer__list_content",r),a=domChildIndex(o)-1,s=r?intval(Object(i.domData)(r,"article-id")):0;if(Object(i.hasClass)(t.target,"article_ed_layer__list_new"))return e._onArticleSelected(0),void e._hide();if(Object(i.hasClass)(t.target,"article_ed_layer__list_item_delete")){e._deleteDraft(s,Object(i.domData)(r,"delete-hash")),Object(i.re)(r),e._currentArticleId==s&&(delete e._currentArticleId,e._onArticleSelected(0));var l=domPN(Object(i.geByClass1)("article_ed_layer__list_content_no_rows",o));if(1==l.children.length){var u=Object(i.geByClass1)("article_ed_layer__list_content_no_rows",o);Object(i.show)(u)}var c=Object(i.geByClass1)("ui_tabs",e._contentEl).children[a],d=Object(i.geByClass1)("ui_tab_count",c);return void(d.innerHTML=intval(d.innerHTML)-1)}if(r){var f=e._onArticleSelected(s);f&&(e.updateCurrent(s),e.setCurrentLoading(!0))}}}),this._contentEl)},e}();t["default"]=s},193:function(e,t,n){"use strict";function r(e){var t=PageID;return function(){t==PageID&&e.apply(this,arguments)}}function i(e,t){return setTimeout(r(e),t)}function o(e,t){return Math.random()*(t-e+1)+e}function a(e,t){return Math.floor(o(e,t))}function s(e){return"undefined"==typeof e}function l(e){return e&&"[object Function]"===Object.prototype.toString.call(e)}function u(e){return"[object Array]"===Object.prototype.toString.call(e)}function c(e){return"string"==typeof e}function d(e){return"[object Object]"===Object.prototype.toString.call(e)}function f(e){if("[object Object]"!==Object.prototype.toString.call(e))return!1;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function p(){return+new Date}function h(){return window.Image?new Image:ce("img")}function _(e){return(e||"").replace(/^\s+|\s+$/g,"")}function g(e){return e?e.replace(/<(?:.|\s)*?>/g,""):""}function v(e){return e?e.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1"):""}function m(e){return e===!0?1:parseInt(e)||0}function y(e){return e===!0?1:parseFloat(e)||0}function w(e){return e=m(e),0>e?0:e}function b(e){return!isNaN(e)}function C(e){return e.replace(/&#(\d\d+);/g,function(e,t){return t=m(t),t>=32?String.fromCharCode(t):e}).replace(/&quot;/gi,'"').replace(/&lt;/gi,"<").replace(/&gt;/gi,">").replace(/&amp;/gi,"&")}function E(e){return se("<textarea>"+(e||"").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")+"</textarea>").value}function S(e){return e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):""}function T(e){return E(e.replace(/\t/g,"\n"))}function x(e,t){if(d(e)||"undefined"==typeof e.length){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t.call(e[n],n,e[n])===!1)break}else for(var r=0,i=e.length;i>r;r++){var o=e[r];if(t.call(o,r,o)===!1)break}return e}function L(e,t,n){for(var r=n||0,i=(e||[]).length;i>r;r++)if(e[r]==t)return r;return-1}function O(e,t){return-1!=L(t,e)}function k(e,t){var n=d(e)||"undefined"==typeof e.length?{}:[];for(var r in e)(!/webkit/i.test(_ua)||"layerX"!=r&&"layerY"!=r&&"webkitMovementX"!=r&&"webkitMovementY"!=r)&&(t&&"object"===U(e[r])&&"prototype"!==r&&null!==e[r]?n[r]=k(e[r]):n[r]=e[r]);return n}function N(e){var t,n,r={},i=1,o=arguments.length,a=arguments;for(t in e){for(n=!1,i=1;o>i;i++)a[i][t]&&a[i][t]==e[t]&&(n=!0);n||(r[t]=e[t])}return r}function A(){var e,t=arguments,n=t[0]||{},r=1,i=t.length,o=!1;for("boolean"==typeof n&&(o=n,n=t[1]||{},r=2),"object"===("undefined"==typeof n?"undefined":U(n))||l(n)||(n={});i>r;++r)if(null!=(e=t[r]))for(var a in e){var s=n[a],u=e[a];n!==u&&(o&&u&&"object"===("undefined"==typeof u?"undefined":U(u))&&!u.nodeType?n[a]=A(o,s||(null!=u.length?[]:{}),u):void 0!==u&&(n[a]=u))}return n}function B(e){window.templates=window.templates||{},A(window.templates,e)}function j(e,t){var n=window.templates=window.templates||{},r=n[e];return"function"==typeof r&&(r=r()),r&&t?rs(r,t):r||""}function P(e){if("object"!=("undefined"==typeof e?"undefined":U(e)))return!1;var t={},n=function(t){return geByTag(t,e)},r=function(n,r){if(r.name)if("text"!=r.type&&r.type)if(r.getAttribute("bool")){var i=val(r);if(!i||"0"===i)return;t[r.name]=1}else t[r.name]=browser.msie&&!r.value&&e[r.name]?e[r.name].value:r.value;else t[r.name]=val(r)};return x(n("input"),function(e,t){return"radio"!=t.type&&"checkbox"!=t.type||t.checked?r(e,t):void 0}),x(n("select"),r),x(n("textarea"),r),t}function I(e,t){for(var n,r=t?F:z,i=[];e&&(n=e.match(r));){e=e.substr(n.index+n[0].length);var o=0;n[4]||(o=7),i.push({url:n[2+o],query:n[5+o]||"",domain:n[4+o]})}return i}function D(){return window.devicePixelRatio>=2}function R(e){var t=0,n=0,r=e.ownerDocument||e.document,i=r.defaultView||r.parentWindow,o=i.getSelection();if(o.rangeCount>0){var a=i.getSelection().getRangeAt(0),s=a.cloneRange();s.selectNodeContents(e),s.setEnd(a.startContainer,a.startOffset),t=s.toString().length,s.setEnd(a.endContainer,a.endOffset),n=s.toString().length}return[t,n]}function M(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.kLimit||1e3,r=t.mLimit||1e6;return e>=r&&!t.noCheck?(e=m(e/1e5),e=e>1e3?m(e/10):e/10,M(e,A(t,{noCheck:!0}),!0)+"M"):e>=n&&!t.noCheck?(e=m(e/100),e=e>100?m(e/10):e/10,M(e,A(t,{noCheck:!0}),!0)+"K"):langNumeric(e,"%s",!0).replace(/,/g,".")}n.r(t),n.d(t,"vkLocal",function(){return r}),n.d(t,"lTimeout",function(){return i}),n.d(t,"rand",function(){return o}),n.d(t,"irand",function(){return a}),n.d(t,"isUndefined",function(){return s}),n.d(t,"isFunction",function(){return l}),n.d(t,"isArray",function(){return u}),n.d(t,"isString",function(){return c}),n.d(t,"isObject",function(){return d}),n.d(t,"isEmpty",function(){return f}),n.d(t,"vkNow",function(){return p}),n.d(t,"vkImage",function(){return h}),n.d(t,"trim",function(){return _}),n.d(t,"stripHTML",function(){return g}),n.d(t,"escapeRE",function(){return v}),n.d(t,"intval",function(){return m}),n.d(t,"floatval",function(){return y}),n.d(t,"positive",function(){return w}),n.d(t,"isNumeric",function(){return b}),n.d(t,"winToUtf",function(){return C}),n.d(t,"replaceEntities",function(){return E}),n.d(t,"clean",function(){return S}),n.d(t,"unclean",function(){return T}),n.d(t,"each",function(){return x}),n.d(t,"indexOf",function(){return L}),n.d(t,"inArray",function(){return O}),n.d(t,"clone",function(){return k}),n.d(t,"arrayKeyDiff",function(){return N}),n.d(t,"extend",function(){return A}),n.d(t,"addTemplates",function(){return B}),n.d(t,"getTemplate",function(){return j}),n.d(t,"serializeForm",function(){return P}),n.d(t,"extractUrls",function(){return I}),n.d(t,"isRetina",function(){return D}),n.d(t,"getCaretCharacterOffsetWithin",function(){return R}),n.d(t,"formatCount",function(){return M}),n.d(t,"encodeHtml",function(){return q}),n.d(t,"decodeHtml",function(){return G});var H=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{!r&&s["return"]&&s["return"]()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};window.PageID=window.PageID||1;var z=/(?:([!()?., \n\r\t \u00A0]|^)((https?:\/\/)?((?:[a-z0-9_\-]+\.)+(?:[a-z]{2,9}|xn--p1ai|xn--j1amh|xn--80asehdb|xn--80aswg))(\/.*?)?(\#.*?)?)(?:[\.!:;,\*\(\)]*(&nbsp;|[ \t\r\n \u00A0]))|([!()?., \n\r\t \u00A0]|^)((https?:\/\/)?((?:[a-z0-9а-яєґї_\-]+\.)+(?:рф|укр|онлайн|сайт|срб))(\/.*?)?(\#.*?)?)(?:[\.!:;,\*\(\)]*(&nbsp;|[ \t\r\n \u00A0])))/i,F=/(?:([!()?., \n\r\t \u00A0]|^)((https?:\/\/)?((?:[a-z0-9_\-]+\.)+(?:[a-z]{2,9}|xn--p1ai|xn--j1amh|xn--80asehdb|xn--80aswg))(\/.*?)?(\#.*?)?)(?:[\.!:;,\*\(\)&]*(&nbsp;|[ \t\r\n \u00A0]|$))|([!()?., \n\r\t \u00A0]|^)((https?:\/\/)?((?:[a-z0-9а-яєґї_\-]+\.)+(?:рф|укр|онлайн|сайт|срб))(\/.*?)?(\#.*?)?)(?:[\.!:;,\*\(\)&]*(&nbsp;|[ \t\r\n \u00A0]|$)))/i,W=function(){var e=null;return[function(t){return e||(e=se("<span> </span>")),e.innerText=t,e.innerHTML.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},function(t){return e||(e=se("<span> </span>")),e.innerHTML=t,e.innerText}]}(),$=H(W,2),q=$[0],G=$[1];window.isRetina=D,window.extractUrls=I,window.serializeForm=P,window.addTemplates=B,window.getTemplate=j,window.rand=o,window.irand=a,window.isUndefined=s,window.isFunction=l,window.isArray=u,window.isString=c,window.isObject=d,window.isEmpty=f,window.vkNow=p,window.vkImage=h,window.trim=_,window.stripHTML=g,window.escapeRE=v,window.intval=m,window.floatval=y,window.positive=w,window.isNumeric=b,window.winToUtf=C,window.replaceEntities=E,window.clean=S,window.unclean=T,window.each=x,window.indexOf=L,window.inArray=O,window.clone=k,window.arrayKeyDiff=N,window.extend=A,window.vkLocal=r,window.lTimeout=i,window.getCaretCharacterOffsetWithin=R,window.formatCount=M,window.encodeHtml=q,window.decodeHtml=G},301:function(e,t,n){"use strict";n.r(t),n(550);try{stManager.done(jsc("web/article_editor_layer.js"))}catch(r){}},325:function(e,t,n){e.exports=n(301)},424:function(e,t,n){"use strict";function r(e){var t="",n="";return e.slides.forEach(function(e,r){var i='<div class="article_ed_guide__slide" id="slide_'+r+'">';if(e[1]&&(i+='<div class="article_ed_guide__slide_title">'+e[1]+"</div>"),i+='<div class="article_ed_guide__slide_inner">',e[2]){var o=e[2];if(inArray(r,[2,3])){var a=o.split("<br>"),s=browser.mac?"cmd":"ctrl";a.forEach(function(e,t){var n=e.split(":");a[t]='<span class="article_ed_guide__btn_combination">'+n[0]+'</span><span class="article_ed_guide__btn_desc">'+n[1]+"</span>"}),o=a.map(function(e){return'<span class="article_ed_guide__btn_row">'+e+"</span>"}).join(""),o=o.replace(/{([^}]+)}/g,'<span class="article_ed_guide__btn">$1</span>'),o=o.replace(/ctrl/g,s)}i+='<div class="article_ed_guide__slide_text">'+o+"</div>"}if(e[3]){var l=e[3];0==r&&(0==vk.lang||(l=1==vk.lang?l.replace(".png","_ua.png"):l.replace(".png","_en.png"))),isRetina()&&(l=l.replace(".png","_2x.png")),i+='<div class="article_ed_guide__slide_image"><img src="'+l+'"/></div>'}e[4]&&(i+='<div class="article_ed_guide__slide_subtitle">'+e[4]+"</div>"),i+="</div>",i+="</div>",t+=trim(i),n+=trim('\n      <div class="article_ed_guide__tab" data-index="'+r+'">'+e[0]+"</div>\n    ")}),n+=trim('\n    <div class="article_ed_guide__tab article_ed_guide__tab_more"><a target="_blank" href="_40authors-redaktor-statei">'+getLang("pages_articles_more")+"</a></div>\n  "),l=se('\n    <div class="article_ed_guide">\n      <div class="article_ed_guide__close"></div>\n      <div class="article_ed_guide__slides_wrap">\n        <div class="article_ed_guide__left"></div>\n        <div class="article_ed_guide__right"></div>\n        <div class="article_ed_guide__slides">'+t+'</div>\n      </div>\n      <div class="article_ed_guide__tabs">'+n+"</div>\n    </div>\n  "),geByClass1("article_ed_guide__close",l).addEventListener("click",function(){o()}),geByClass1("article_ed_guide__left",l).addEventListener("click",function(){u--,i()}),geByClass1("article_ed_guide__right",l).addEventListener("click",function(){u++,i()}),each(geByClass("article_ed_guide__tab",l),function(e,t){t.addEventListener("click",function(){hasClass(t,"article_ed_guide__tab_more")||(u=domData(t,"index"),i())})}),l}function i(){var e=geByClass("article_ed_guide__slide"),t=geByClass("article_ed_guide__tab");t.pop(),0>u?u=e.length-1:u>=e.length&&(u=0),each(e,function(e,t){toggle(t,e==u)}),each(t,function(e,t){toggleClass(t,"active",e==u)}),d()}function o(){addClass(l,"article_ed_guide__hide"),setTimeout(function(){re(l),l=!1},60),a(),f(!1),d()}function a(){c.isClosed||(ajax.post("al_articles.php",{act:"guide_close"}),c.isClosed=!0)}function s(e,t,n,o){c=t,d=n,f=o;var s=r(t);e.appendChild(s),i(),f(!0),setTimeout(function(){a()},2e3)}n.r(t),n.d(t,"showGuide",function(){return s});var l=void 0,u=0,c=!1,d=!1,f=void 0},449:function(e,t,n){"use strict";function r(e){return"string"==typeof e||"number"==typeof e?document.getElementById(e):e}function i(e,t){return t=r(t)||document,t.getElementsByTagName(e)}function o(e,t){return t=r(t)||document,t.querySelector&&t.querySelector(e)||i(e,t)[0]}function a(e,t,n){t=r(t)||document,n=n||"*";var o=[];if(t.querySelectorAll&&"*"!=n)return t.querySelectorAll(n+"."+e);if(t.getElementsByClassName){var a=t.getElementsByClassName(e);if("*"!=n){n=n.toUpperCase();for(var s=0,l=a.length;l>s;++s)a[s].tagName.toUpperCase()==n&&o.push(a[s])}else o=Array.prototype.slice.call(a);return o}for(var u=i(n,t),c=new RegExp("(^|\\s)"+e+"(\\s|$)"),s=0,l=u.length;l>s;++s)c.test(u[s].className)&&o.push(u[s]);return o}function s(e,t,n){return t=r(t)||document,n=n||"*",t.querySelector&&t.querySelector(n+"."+e)||a(e,t,n)[0]}function l(e,t,n){if(t=r(t),!t)return null;for(;n!==t&&(t=t.parentNode);)if(ee(t,e))return t;return null}function u(e,t){return(t||document).querySelectorAll(e)}function c(e,t){return(t||document).querySelector(e)}function d(e,t){return ee(t,e)?t:l(e,t)}function f(e,t){return e=e.toUpperCase(),t.nodeType==Node.ELEMENT_NODE&&t.tagName.toUpperCase()==e?t:p(e,t)}function p(e,t){if(t=r(t),!t)return null;for(e=e.toUpperCase();t=t.parentNode;)if(t.tagName&&t.tagName.toUpperCase()==e)return t;return null}function h(e,t,n){var r=document.createElement(e);return t&&extend(r,t),n&&ue(r,n),r}function _(e){return e=r(e),e&&e.parentNode&&e.parentNode.removeChild(e),e}function g(e){return S(h("div",{innerHTML:e}))}function v(e){return L(h("div",{innerHTML:e}))}function m(e,t){return each(t,function(t,n){e=e.replace(new RegExp("%"+t+"%","g"),("undefined"==typeof n?"":n).toString().replace(/\$/g,"&#036;"))}),e}function y(e){return"https:"!=locProtocol?e:(e=e.replace(/http:\/\/(cs(\d+)\.vk\.me\/c(\d+)\/)/gi,"https://$1"),e=e.replace(/http:\/\/cs(\d+)\.(userapi\.com|vk\.com|vk\.me|vkontakte\.ru)\/c(\d+)\/(v\d+\/|[a-z0-9\/_:\-]+\.jpg)/gi,"../https@pp.vk.me/c$3/$4"),e=e.replace(/../cs(/d+)/.(userapi/.com|vk\.com|vk\.me|vkontakte\.ru)\/([a-z0-9\/_:\-]+\.jpg)/gi,"../https@pp.vk.me/c$1/$3"),e=e.replace(/../cs(/d+)/.(userapi/.com|vk\.com|vk\.me|vkontakte\.ru)\//gi,"../https@ps.vk.me/c$1/default.htm"),e=e.replace(/http:\/\/video(\d+)\.vkadre\.ru\//gi,"../https@ps.vk.me/v$1/default.htm"))}function w(e,t){return isString(t)&&(t=g(t)),x(e).replaceChild(t,e),t}function b(e,t){for(t=t?"previousSibling":"nextSibling";e&&!e.tagName;)e=e[t];return e}function C(e){return b((e||{}).nextSibling)}function E(e){return b((e||{}).previousSibling,1)}function S(e){return b((e||{}).firstChild)}function T(e){return b((e||{}).lastChild,1)}function x(e){return(e||{}).parentNode}function L(e){for(var t=[],n=e.childNodes,r=0;r<n.length;r++)n[r].tagName&&t.push(n[r]);return t}function O(e,t){var n=x(t);return n&&n.insertBefore(e,t)}function k(e,t){var n=x(t);return n&&n.insertBefore(e,C(t))}function N(e,t){return e?s(t,e):e}function A(e,t,n){return e?"undefined"!=typeof n?(null===n?e.removeAttribute("data-"+t):e.setAttribute("data-"+t,n),n):e.getAttribute("data-"+t):null}function B(e){for(var t=0;null!=(e=E(e));)t++;return t}function j(e,t){do e=x(e);while(e&&!I(e,t));return e}function P(e,t,n){for(var r=null;null===r&&e;)e=-1===n?E(e):C(e),e&&I(e,t)&&(r=e);return r}function I(e,t){if(e=r(e),!e||e==document)return!1;var n=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||function(e){for(var t=(this.parentNode||this.document||this.ownerDocument).querySelectorAll(e),n=t.length;--n>=0&&t[n]!==this;);return n>-1};return n.call(e,t)}function D(e){return I(e,":hover")}function R(e,t){var n=r(e);if(t=r(t),!e||!t)return!1;for(;n=n.parentNode;)if(n==t)return!0;return!1}function M(){var e=browser.msie6?r("PageContainer"):document.body,t=document.documentElement;return[e.scrollLeft||t.scrollLeft||window.pageXOffset||0,e.scrollTop||t.scrollTop||window.pageYOffset||0,t.clientWidth||e.clientWidth||0,t.clientHeight||e.clientHeight||0]}function H(e,t){t=t||{};for(var n=t.fromEl||x(e),r=t.positions||["relative","absolute","fixed"];n&&n!=bodyNode;){var i=le(n,"position");if(inArray(i,r)&&(!t.noOverflow||"hidden"!=le(n,"overflow")))break;n=x(n)}return n}function U(e,t){e=r(e);for(var n,i,o,a,s=e;s&&s.tagName&&s!==bodyNode&&(n=le(s,"position"),i=le(s,"overflow"),o=le(s,"transform"),!t||!browser.mozilla||"page_wrap"==s.id||s===e||"visible"===i||("static"===n?a&&"relative"!==a:"fixed"===a));)"none"!==o?a=void 0:"static"!==n&&"fixed"!==a&&(a=n),s=x(s);return s}function z(e){var t=arguments.length;if(t>1)for(var n=0;t>n;n++)z(arguments[n]);else if(e=r(e),e&&e.style){var i=e.olddisplay,o="block",a=e.tagName.toLowerCase();e.style.display=i||"","none"===le(e,"display")&&(o=ee(e,"inline")||ee(e,"_inline")?"inline":ee(e,"_inline_block")?"inline-block":"tr"!==a||browser.msie?"table"!==a||browser.msie?"block":"table":"table-row",e.style.display=e.olddisplay=o)}}function F(e){var t=arguments.length;if(t>1)for(var n=0;t>n;n++)F(arguments[n]);else if(e=r(e),e&&e.style){var i=le(e,"display");e.olddisplay="none"!=i?i:"",e.style.display="none"}}function W(e){return e=r(e),e&&e.style?"none"!=le(e,"display"):!1}function $(){return window.innerHeight||document.documentElement.clientHeight||bodyNode.clientHeight}function q(e,t,n){e=r(e),n=n||0;var i=X(e)[1],o=K(e)[1],a=window,s=document.documentElement,l=Math.max(intval(a.innerHeight),intval(s.clientHeight)),u=r("page_header_cont"),c=s.scrollTop||bodyNode.scrollTop||window.scrollY||0,d=vk.staticheader?Math.max(0,K(u)[1]-c):K(u)[1];if(t){if(c+d+n>i+o)return i+o-c-d-n;if(i>c+l-n)return i-c-l+n}else{if(c+d+n>i)return i-c-d-n;if(i+o>c+l-n)return i+o-c-l+n}return 0}function G(e,t){return void 0===t&&(t=!W(e)),
t?z(e):F(e),t}function V(e){return"undefined"!=typeof e.getBoundingClientRect}function Y(e,t){var n;if(t&&"inline"==le(e,"display")){var r=e.getClientRects();n=r&&r[0]||e.getBoundingClientRect()}else n=e.getBoundingClientRect();return n}function X(e,t){if(e=r(e),!e)return[0,0];var n,i,o={top:0,left:0},a=e.ownerDocument;return a?(n=a.documentElement,V(e)&&(o=Y(e,!0)),i=a==a.window?a:9===a.nodeType?a.defaultView||a.parentWindow:!1,[o.left+(t?0:i.pageXOffset||n.scrollLeft)-(n.clientLeft||0),o.top+(t?0:i.pageYOffset||n.scrollTop)-(n.clientTop||0)]):[0,0]}function Q(e){return null!=e&&e===e.window}function K(e,t,n){e=r(e);var i,o=[0,0],a=document.documentElement;if(t&&"border-box"===le(e,"boxSizing")&&(t=!1),e==document)o=[Math.max(a.clientWidth,bodyNode.scrollWidth,a.scrollWidth,bodyNode.offsetWidth,a.offsetWidth),Math.max(a.clientHeight,bodyNode.scrollHeight,a.scrollHeight,bodyNode.offsetHeight,a.offsetHeight)];else if(e){var s=function(){o=V(e)&&(i=Y(e,n))&&void 0!==i.width?[i.width,i.height]:[e.offsetWidth,e.offsetHeight],t&&each(o,function(t,n){var r=t?["Top","Bottom"]:["Left","Right"];each(r,function(){o[t]-=parseFloat(le(e,"padding"+this))||0,o[t]-=parseFloat(le(e,"border"+this+"Width"))||0})})};if(W(e))s();else{var l={position:"absolute",visibility:"hidden",display:"block"},u={},c=!1;e.style.cssText.indexOf("!important")>-1&&(c=e.style.cssText),each(l,function(t,n){u[t]=e.style[t],e.style[t]=n}),s(),each(l,function(t,n){e.style[t]=u[t]}),c&&(e.style.cssText=c)}}return o}function Z(e){return K(e)[0]}function J(e){return K(e)[1]}function ee(e,t){return e=r(e),e&&1===e.nodeType&&(" "+e.className+" ").replace(window.whitespaceRegex," ").indexOf(" "+t+" ")>=0?!0:!1}function te(e,t){(e=r(e))&&!ee(e,t)&&(e.className=(e.className?e.className+" ":"")+t)}function ne(e,t){return setTimeout(te.pbind(e,t),0)}function re(e,t){(e=r(e))&&(e.className=trim((e.className||"").replace(new RegExp("(\\s|^)"+t+"(\\s|$)")," ")))}function ie(e,t){return setTimeout(re.pbind(e,t),0)}function oe(e,t,n){return void 0===n&&(n=!ee(e,t)),(n?te:re)(e,t),n}function ae(e,t,n){return void 0===n&&(n=!ee(e,t)),(n?ne:ie)(e,t),n}function se(e,t,n){re(e,t),te(e,n)}function le(e,t,n){if(e=r(e),isArray(t)){var i={};return each(t,function(t,n){i[n]=le(e,n)}),i}if(!e)return"";if(void 0===n&&(n=!0),!n&&"opacity"==t&&browser.msie){var o=e.style.filter;return o?o.indexOf("opacity=")>=0?parseFloat(o.match(/opacity=([^)]*)/)[1])/100+"":"1":""}if(!n&&e.style&&(e.style[t]||"height"==t))return e.style[t];var a,s=document.defaultView||window;if(s.getComputedStyle){t=t.replace(/([A-Z])/g,"-$1").toLowerCase();var l=s.getComputedStyle(e,null);l&&(a=l.getPropertyValue(t))}else if(e.currentStyle){if("opacity"==t&&browser.msie){var o=e.currentStyle.filter;return o&&o.indexOf("opacity=")>=0?parseFloat(o.match(/opacity=([^)]*)/)[1])/100+"":"1"}var u=t.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()});a=e.currentStyle[t]||e.currentStyle[u],"auto"==a&&(a=0),a=(a+"").split(" "),each(a,function(t,n){if(!/^\d+(px)?$/i.test(n)&&/^\d/.test(n)){var r=e.style,i=r.left,o=e.runtimeStyle.left;e.runtimeStyle.left=e.currentStyle.left,r.left=n||0,a[t]=r.pixelLeft+"px",r.left=i,e.runtimeStyle.left=o}}),a=a.join(" ")}if(n&&("width"==t||"height"==t)){var c=K(e,!0)[{width:0,height:1}[t]];a=(intval(a)?Math.max(floatval(a),c):c)+"px"}return a}function ue(e,t,n){if(e=r(e)){if("object"==("undefined"==typeof t?"undefined":Te(t)))return each(t,function(t,n){ue(e,t,n)});if("opacity"==t)browser.msie&&((n+"").length?1!==n?e.style.filter="alpha(opacity="+100*n+")":e.style.filter="":e.style.cssText=e.style.cssText.replace(/filter\s*:[^;]*/gi,""),e.style.zoom=1),e.style.opacity!==n&&(e.style.opacity=n);else try{var i="number"==typeof n;i&&/height|width/i.test(t)&&(n=Math.abs(n)),n=i&&!/z-?index|font-?weight|opacity|zoom|line-?height/i.test(t)?n+"px":n,e.style[t]!==n&&(e.style[t]=n)}catch(o){debugLog("setStyle error: ",[t,n],o)}}}function ce(e,t,n){setTimeout(ue.pbind(e,t,n),0)}function de(e,t,n){var i=fe(e,"pseudo-id");i||(fe(e,"pseudo-id",i=irand(1e8,999999999)),te(e,"_pseudo_"+i));var o=t+"-style-"+i,a=r(o),s="._pseudo_"+i+":"+t+"{";a||(a=headNode.appendChild(h("style",{id:o,type:"text/css"}))),each(n,function(e,t){s+=e+": "+t+" !important;"}),s+="}",a.sheet?(a.sheet.cssRules.length&&a.sheet.deleteRule(0),a.sheet.insertRule(s,0)):a.styleSheet&&(a.styleSheet.cssText=s)}function fe(e,t,n){if(!e)return!1;var r,i=e[vkExpand];return i||(i=e[vkExpand]=++vkUUID),n!==r&&(vkCache[i]||(vkCache[i]={},__debugMode&&(vkCache[i].__elem=e)),vkCache[i][t]=n),t?vkCache[i]&&vkCache[i][t]:i}function pe(e,t,n){return e=r(e),"undefined"==typeof n?e.getAttribute(t):(e.setAttribute(t,n),n)}function he(e){for(var t=0,n=arguments.length;n>t;++t){var r=arguments[t];if(void 0!==e[r])try{delete e[r]}catch(i){try{e.removeAttribute(r)}catch(i){}}}}function _e(e,t){var n=e?e[vkExpand]:!1;if(n)if(t){if(vkCache[n]){delete vkCache[n][t],t="";var r=0;for(t in vkCache[n])if("__elem"!==t){r++;break}r||_e(e)}}else removeEvent(e),he(e,vkExpand),delete vkCache[n]}function ge(){for(var e=arguments,t=0;t<e.length;++t){var n=r(e[t]);n&&(_e(n),he(n,"btnevents"))}}function ve(e,t,n){if(e=r(e),e&&!e.titleSet){if(t||(t=e),t.scrollWidth>t.clientWidth)e.setAttribute("title",n||e.innerText||e.textContent);else{var i=o("b",e);i&&i.scrollWidth>i.clientWidth?e.setAttribute("title",n||e.innerText||e.textContent):e.removeAttribute("title")}e.titleSet=1}}function me(){var e=r("zoom_test_1")||document.body.appendChild(h("div",{id:"zoom_test_1"},{left:"10%",position:"absolute",visibility:"hidden"})),t=r("zoom_test_2")||document.body.appendChild(h("div",{id:"zoom_test_2"},{left:e.offsetLeft+"px",position:"absolute",visibility:"hidden"}));return t.offsetLeft/e.offsetLeft}function ye(e,t,n){return(e=r(e))?(void 0!==t&&(e.setValue?(e.setValue(t),!n&&e.phonblur&&e.phonblur()):"INPUT"==e.tagName||"TEXTAREA"==e.tagName?e.value=t:void 0!==e.emojiId&&window.Emoji?Emoji.val(e,t):e.innerHTML=t,!n&&triggerEvent(e,"valueChanged")),e.getValue?e.getValue():("INPUT"==e.tagName||"TEXTAREA"==e.tagName?e.value:e.innerHTML)||""):void 0}function we(e,t,n){e=r(e);try{if(e.focus(),(void 0===t||t===!1)&&(t=e.value.length),(void 0===n||n===!1)&&(n=t),e.createTextRange){var i=e.createTextRange();i.collapse(!0),i.moveEnd("character",n),i.moveStart("character",t),i.select()}else e.setSelectionRange&&e.setSelectionRange(t,n)}catch(o){}}function be(e,t,n){for(e=r(e),n=n||999;e&&!t(e);){if(n--,0==n)return!1;try{if(e=x(e),e==document)break}catch(i){e=!1}}return e}function Ce(e){return xe?void 0:window.document.title=replaceEntities(e)}function Ee(e){xe=e,e&&window.cur&&window.cur.destroy.push(function(){Ee(!1)})}n.r(t),n.d(t,"ge",function(){return r}),n.d(t,"geByTag",function(){return i}),n.d(t,"geByTag1",function(){return o}),n.d(t,"geByClass",function(){return a}),n.d(t,"geByClass1",function(){return s}),n.d(t,"gpeByClass",function(){return l}),n.d(t,"domQuery",function(){return u}),n.d(t,"domQuery1",function(){return c}),n.d(t,"domClosest",function(){return d}),n.d(t,"domClosestByTag",function(){return f}),n.d(t,"gpeByTag",function(){return p}),n.d(t,"ce",function(){return h}),n.d(t,"re",function(){return _}),n.d(t,"se",function(){return g}),n.d(t,"sech",function(){return v}),n.d(t,"rs",function(){return m}),n.d(t,"psr",function(){return y}),n.d(t,"domReplaceEl",function(){return w}),n.d(t,"domEL",function(){return b}),n.d(t,"domNS",function(){return C}),n.d(t,"domPS",function(){return E}),n.d(t,"domFC",function(){return S}),n.d(t,"domLC",function(){return T}),n.d(t,"domPN",function(){return x}),n.d(t,"domChildren",function(){return L}),n.d(t,"domInsertBefore",function(){return O}),n.d(t,"domInsertAfter",function(){return k}),n.d(t,"domByClass",function(){return N}),n.d(t,"domData",function(){return A}),n.d(t,"domChildIndex",function(){return B}),n.d(t,"domCA",function(){return j}),n.d(t,"domClosestSibling",function(){return P}),n.d(t,"matchesSelector",function(){return I}),n.d(t,"isHover",function(){return D}),n.d(t,"isAncestor",function(){return R}),n.d(t,"getScroll",function(){return M}),n.d(t,"domClosestPositioned",function(){return H}),n.d(t,"domClosestOverflowHidden",function(){return U}),n.d(t,"show",function(){return z}),n.d(t,"hide",function(){return F}),n.d(t,"isVisible",function(){return W}),n.d(t,"clientHeight",function(){return $}),n.d(t,"getClientRectOffsetY",function(){return q}),n.d(t,"toggle",function(){return G}),n.d(t,"boundingRectEnabled",function(){return V}),n.d(t,"getXYRect",function(){return Y}),n.d(t,"getXY",function(){return X}),n.d(t,"isWindow",function(){return Q}),n.d(t,"getSize",function(){return K}),n.d(t,"getW",function(){return Z}),n.d(t,"getH",function(){return J}),n.d(t,"hasClass",function(){return ee}),n.d(t,"addClass",function(){return te}),n.d(t,"addClassDelayed",function(){return ne}),n.d(t,"removeClass",function(){return re}),n.d(t,"removeClassDelayed",function(){return ie}),n.d(t,"toggleClass",function(){return oe}),n.d(t,"toggleClassDelayed",function(){return ae}),n.d(t,"replaceClass",function(){return se}),n.d(t,"getStyle",function(){return le}),n.d(t,"setStyle",function(){return ue}),n.d(t,"setStyleDelayed",function(){return ce}),n.d(t,"setPseudoStyle",function(){return de}),n.d(t,"data",function(){return fe}),n.d(t,"attr",function(){return pe}),n.d(t,"removeAttr",function(){return he}),n.d(t,"removeData",function(){return _e}),n.d(t,"cleanElems",function(){return ge}),n.d(t,"setTitle",function(){return ve}),n.d(t,"getZoom",function(){return me}),n.d(t,"val",function(){return ye}),n.d(t,"elfocus",function(){return we}),n.d(t,"traverseParent",function(){return be}),n.d(t,"setDocumentTitle",function(){return Ce}),n.d(t,"lockDocumentTitle",function(){return Ee});var Se=n(193),Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};window.cf=function(e){var t=e.createDocumentFragment(),n=e.createElement("div"),r=e.createRange&&e.createRange();return t.appendChild(n),r&&r.selectNodeContents(n),r&&r.createContextualFragment?function(t){return t?r.createContextualFragment(t):e.createDocumentFragment()}:function(t){if(!t)return e.createDocumentFragment();n.innerHTML=t;for(var r=e.createDocumentFragment();n.firstChild;)r.appendChild(n.firstChild);return r}}(document),window.whitespaceRegex=/[\t\r\n\f]/g,window.cssTransformProp=function(){var e=document.createElement("div");if(null==e.style.transform){var t=["Webkit","Moz","ms"];for(var n in t)if(void 0!==e.style[t[n]+"Transform"])return t[n]+"Transform"}return"transform"}(),window.vkExpand=window.vkExpand||"VK"+Object(Se.vkNow)(),window.vkUUID=window.vkUUID||0,window.vkCache=window.vkCache||{};var xe=!1;window.ge=r,window.geByTag=i,window.geByTag1=o,window.geByClass=a,window.geByClass1=s,window.gpeByClass=l,window.domQuery=u,window.domQuery1=c,window.domClosest=d,window.ce=h,window.re=_,window.se=g,window.sech=v,window.rs=m,window.psr=y,window.domReplaceEl=w,window.domEL=b,window.domNS=C,window.domPS=E,window.domFC=S,window.domLC=T,window.domPN=x,window.domChildren=L,window.domInsertBefore=O,window.domInsertAfter=k,window.domByClass=N,window.domData=A,window.domChildIndex=B,window.domCA=j,window.domClosestSibling=P,window.matchesSelector=I,window.isHover=D,window.isAncestor=R,window.getScroll=M,window.domClosestPositioned=H,window.domClosestOverflowHidden=U,window.show=z,window.hide=F,window.isVisible=W,window.clientHeight=$,window.getClientRectOffsetY=q,window.toggle=G,window.boundingRectEnabled=V,window.getXYRect=Y,window.getXY=X,window.isWindow=Q,window.getSize=K,window.hasClass=ee,window.addClass=te,window.addClassDelayed=ne,window.removeClass=re,window.removeClassDelayed=ie,window.toggleClass=oe,window.toggleClassDelayed=ae,window.replaceClass=se,window.getStyle=le,window.setStyle=ue,window.setStyleDelayed=ce,window.setPseudoStyle=de,window.data=fe,window.attr=pe,window.removeAttr=he,window.removeData=_e,window.cleanElems=ge,window.setTitle=ve,window.getZoom=me,window.val=ye,window.elfocus=we,window.traverseParent=be,window.getH=J,window.getW=Z,window.domClosestByTag=f,window.setDocumentTitle=Ce,window.lockDocumentTitle=Ee},474:function(e,t,n){"use strict";function r(){return window.devicePixelRatio>=2}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t.call(e[n],n,e[n])===!1)break;return e}function o(e,t,n){var o=[];if(i(e,function(e,t){n&&-1==["w","z","y","x","m","s"].indexOf(e)||o.push(t)}),!o.length)return[!1];o.sort(function(e,t){return e[1]-t[1]}),t*=r()?2:1;var a=o[o.length-1];return i(o,function(e,n){return n[1]>=t?(a=n,!1):void 0}),a}function a(e,t){if(u[e]===!0)return t&&t(),!0;if(isArray(u[e]))return u[e].push(t),!1;u[e]=[t];var n=new Image;return n.onload=function(){var t=u[e];u[e]=!0,i(t,function(e,t){t&&t()})},n.src=e,!1}function s(e,t){if(isObject(t)&&!isEmpty(t)){var n="../https@vk-callback.go.mail.ru/longread_pxl@action="+e;i(t,function(e,t){n+="&"+e+"="+t});var r=new Image;r.src=n}}n.r(t),n.d(t,"ParagraphType",function(){return l}),n.d(t,"getAppropriateImage",function(){return o}),n.d(t,"preloadImage",function(){return a}),n.d(t,"mailruStatsPixel",function(){return s});var l={Text:1,Header1:2,Header2:3,Header3:4,Code:5,NumericList:6,BulletList:7,Quote:8,Quote2:9,ObjectAudioPlaylist:100,ObjectPhoto:101,ObjectVideo:102,ObjectGIF:103,ObjectAudio:105},u={}},550:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){var t=se(e);return bodyNode.appendChild(t),addClass(bodyNode,"article_ed_body"),t}n.r(t);var o=n(145),a=n(748),s=n(424),l=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{!r&&s["return"]&&s["return"]()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=!1,c=void 0,d=void 0,f=function(){function e(t,n,a,s,l){var u=this;r(this,e),this._ownerId=s.articleOwnerId,this._prevWindowTitle=document.title;var c=this._layer=i(t);extend(cur.lang,s.lang),this._els={layer:c,saveLabel:geByClass1("article_ed_layer__save",c),draftsLabel:geByClass1("article_ed_layer__drafts",c),articlesListLabel:geByClass1("article_ed_layer__list",c),editorContent:geByClass1("article_ed_layer__content",c),title:geByClass1("article_ed_layer__title",c),close:geByClass1("article_ed_layer__close",c),help:geByClass1("article_ed_layer__help",c),publishSettings:geByClass1("article_ed_layer__publish",c)},this._articlesList=new o["default"](this._ownerId,function(){return u._editor},this._els.articlesListLabel,s,function(e){u.open(u._editor.getArticleOwnerId(),e)}),this.open(n,a,s),this._els.close.addEventListener("click",function(){u.hide(!0)}),this._onClose=l,this._els.help.addEventListener("click",function(){u.showGuide()}),this._els.layer.addEventListener("click",function(e){hasClass(e.target,"article_ed_layer__wrap")&&u._editor.focusLastParagraph()}),s.guide.isClosed||this.showGuide(),cur.noDisturbMode=!0,toggleFastChats(!1),cur.articleFeatureTT&&cur.articleFeatureTT.hide()}return e.prototype.showGuide=function(){var e=this;Object(s.showGuide)(this._els.layer,this._editor.getOptions().guide,function(){e._editor.focus()},function(t){toggleClass(e._els.layer,"article_ed_guide_shown",t),e._updateScroll(!1,!0)})},e.prototype.hide=function(e){re(this._els.layer),removeClass(bodyNode,"article_ed_body"),e&&nav.setLoc(extend(nav.objLoc,{z:null,from_rev:null})),this._onClose&&this._onClose(),this._isClosed=!0,delete cur.noDisturbMode,toggleFastChats(!0),this._prevWindowTitle&&(lockDocumentTitle(!1),setDocumentTitle(this._prevWindowTitle)),ajax.post("al_articles.php",{act:"editor_closed",article_owner_id:this._editor.getArticleOwnerId(),article_id:this._editor.getArticleId()})},e.prototype.open=function(e,t,n){var r=this;if(u)return!1;if(isObject(e)){var i=!0;n.onDraftSaved=function(e,t,n){r._setSavedLabel(!0),i&&(i=!1,r._articlesList.update()),r._articlesList.updateCurrent(t,n),r._updateLoc()},n.onDraftNotSaved=function(e){r._setSavedLabel(!1),r._updateScroll(),r._editor&&(lockDocumentTitle(!1),setDocumentTitle(r._editor.getTitle()||r._prevWindowTitle),lockDocumentTitle(!0)),r.showLimitError(e)},this._article=e,this._editor&&this._editor.destroy(),n.layer=this._layer,cur.articleEditor=this._editor=new ArticleEditor(geByClass1("article_ed_layer__content"),e,t,n),this._articlesList.updateCurrent(this._editor.getArticleId()),this._articlesList.setCurrentLoading(!1),this._setSavedLabel(!!e.id,!0),this._updateTitle(),this._updateLoc(),this._updateScroll(!0),this._publishSettingsDialog&&this._publishSettingsDialog.destroy(),this._publishSettingsDialog=new a["default"](this._els.publishSettings,this._editor,function(){r._articlesList.update()},function(e,t){r.open(e,t)},function(){r.hide(!0)}),this._publishSettingsDialog.toggleEnabledPublishButton(!this._editor.isLocked()),n.title&&(lockDocumentTitle(!1),setDocumentTitle(replaceEntities(n.title)),lockDocumentTitle(!0))}else{if(this._editor.getArticleId()==arguments[1]&&this._editor.getArticleOwnerId()==arguments[0])return!1;u=!0,ajax.post("al_articles.php",{act:"open_editor",article_owner_id:arguments[0],article_id:arguments[1]},{showProgress:addClass.bind(this,this._els.editorContent,"article_ed_layer__content_loading"),hideProgress:removeClass.bind(this,this._els.editorContent,"article_ed_layer__content_loading"),onDone:function(e,t,n,i){u=!1,r.open(t,n,i)}})}return!0},e.prototype._updateLoc=function(){if(this._editor)if(!this._isClosed&&this._editor.getArticleId()){var e=nav.objLoc.z?nav.objLoc.z.match(/article_edit(-?\d+_\d+)/):!1;e&&(e=e[1]);var t=this._editor.getArticleOwnerId()+"_"+this._editor.getArticleId();e!=t&&nav.setLoc(extend(nav.objLoc,{z:"article_edit"+t,from_rev:null})),this._editor.updateWarnInfos()}else nav.setLoc(extend(nav.objLoc,{z:"article_edit"+this._ownerId+"_0"}))},e.prototype._updateTitle=function(){this._els.title.innerHTML=this._editor.getArticleId()?getLang("pages_articles_title_edit"):getLang("pages_articles_title_new")},e.prototype._setSavedLabel=function(e,t){var n=this;c!=e&&(clearTimeout(d),e?d=setTimeout(function(){setStyle(n._els.saveLabel,"visibility","visible"),setStyle(n._els.saveLabel,"opacity",1)},500):(setStyle(this._els.saveLabel,"visibility",t?"hidden":"visible"),setStyle(this._els.saveLabel,"opacity",0)))},e.prototype._updateScroll=function(e,t){var n=window.getSelection(),r=geByClass1("article_ed_guide"),i=r?getSize(r)[1]:0,o=window.innerHeight-i;if(n.rangeCount){var a=n.getRangeAt(0),s=a.getBoundingClientRect(),u=s.top;if(!u&&this._editor){var c=this._editor.getCurrentParagraphs(),d=l(c,1),f=d[0];u=getXY(f)[1]}if(u+=this._layer.scrollTop,e)this._layer.scrollTop+o<u&&(this._layer.scrollTop=u-o/2);else{var p=80;if(!t&&(u<this._layer.scrollTop||u>this._layer.scrollTop+o+p));else{var h=this._layer.scrollTop+o-u;p>h&&(this._layer.scrollTop+=p-h)}}}},e.prototype.showLimitError=function(e){var t=geByClass1("article_ed__limit_error");t||(t=se('<div class="article_ed__limit_error"></div>'),this._els.layer.appendChild(t)),t.innerHTML=e,toggle(t,!!e)},e}();window.ArticleEditorLayer=f},724:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.r(t);var i=n(138),o=void 0,a=[],s=debounce(function(e,t,n,r){return o=e,void 0!==a[e]?r(a[e]):void ajax.post("al_articles.php",{act:"check_name",article_owner_id:t,article_id:n,name:e},{onDone:function(t){o==e&&(a[e]=t,r(t))}})},300),l=function(){function e(t,n,o,s,l,u,c){var d=this;r(this,e),t.innerHTML='\n      <input type="text" class="text dark article_ed_layer__publish_settings_name_input" />\n      <div class="article_ed_layer__publish_settings_name_error" style="display: none"></div>\n    ',this._els={el:t,input:geByTag1("input",t),error:geByClass1("article_ed_layer__publish_settings_name_error",t)},this._articleOwnerId=s,this._articleId=l,this._prefix=o,this._onChanged=u,this._onAvailabilityChanged=c,a=[],this._els.input.value=o+n;var f=this._els.input,p=f.value;this._els.input.addEventListener("input",this._input_ev=function(){var e=f.value;e.startsWith(o)?(d._checkCorrectness(),d._onChanged(d.getName())):f.value=p,p=f.value}),this._isNameCorrect=Object(i.isPublishNameCorrect)(this.getName())}return e.prototype.destroy=function(){this._els.input.removeEventListener("input",this._input_ev)},e.prototype.showError=function(e){e?(show(this._els.error),this._els.error.innerHTML=e,addClass(this._els.input,"article_ed_layer__publish_settings_name_input--error")):(hide(this._els.error),removeClass(this._els.input,"article_ed_layer__publish_settings_name_input--error"))},e.prototype._checkCorrectness=function(){var e=this,t=this.getName();Object(i.isPublishNameCorrect)(t)?(this.showError(),s(t,this._articleOwnerId,this._articleId,function(t){t||e.showError(getLang("pages_articles_url_not_available")),e._isNameCorrect=t,e._onAvailabilityChanged()})):(this.showError(getLang("pages_articles_url_not_correct")),this._isNameCorrect=!1,this._onAvailabilityChanged())},e.prototype.isNameCorrect=function(){return this._isNameCorrect},e.prototype.getName=function(){return this._els.input.value.trim().replace(new RegExp("^"+this._prefix),"")},e}();t["default"]=l},748:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.r(t);var i=n(474),o=n(724),a=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{!r&&s["return"]&&s["return"]()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function e(t,n,i,o,a){r(this,e),this._mountEl=t,this._editor=n,this._editorOptions=n.getOptions(),this._onNeedOpenDraft=o,this._onListNeedUpdate=i,this._onNeedLayersHide=a,this._init()}return e.prototype.destroy=function(){this._publishNameInput&&this._publishNameInput.destroy(),this._publishSettingsTooltip&&this._publishSettingsTooltip.destroy()},e.prototype._onFirstTimeShow=function(e){var t=this;e.innerHTML=this._editorOptions.publishSettingsLayout,this._els={publishCoverEl:geByClass1("article_ed_layer__publish_settings_cover",e),publishCoverCloseEl:geByClass1("article_ed_layer__publish_settings_cover_close",e),publishUploadBtn:geByClass1("article_ed_layer__publish_settings_chooser",e),publishSaveButton:geByClass1("article_ed_layer__publish_settings_publish",e),publishDeleteButton:geByClass1("article_ed_layer__publish_settings_delete",e),publishOFMCheckbox:geByClass1("article_ed_layer__publish_settings_ofm",e),publishCoverLabel:geByClass1("article_ed_layer__publish_settings_subheader",e),publishNameInput:geByClass1("article_ed_layer__publish_settings_name_wrap",e),publishText:geByClass1("article_ed_layer__publish_settings_published_text",e),publishAttachBtn:geByClass1("article_ed_layer__publish_settings_attach",e)},this._initCoverUpload(),this._initNameInput(),this.toggleEnabledPublishButton(!this._editor.isLocked()),this._editorOptions.canUseGroupPrivacy?toggleClass(this._els.publishOFMCheckbox,"on",this._editorOptions.ofm):re(this._els.publishOFMCheckbox),this._editorOptions.isPublished||hide(this._els.publishDeleteButton);var n=cur.wallAddMedia?cur.wallAddMedia.chosenMedias:[];n.forEach(function(e){"article"==e[0]&&addClass(t._els.publishAttachBtn,"hidden")}),inArray(cur.module,["feed","profile","groups","public"])||addClass(this._els.publishAttachBtn,"hidden"),this._els.publishDeleteButton&&this._els.publishDeleteButton.addEventListener("click",function(){showFastBox({title:getLang("pages_articles_delete_box_title")},getLang("pages_articles_delete_box_content"),getLang("pages_articles_delete_box_yes"),function(e){ajax.post("al_articles.php",{act:"unpublish_article",article_owner_id:t._editor.getArticleOwnerId(),article_id:t._editor.getArticleId(),hash:t._editorOptions.saveDraftHash},{showProgress:lockButton.pbind(e),hideProgress:unlockButton.pbind(e),onDone:function(){t._onNeedOpenDraft(t._editor.getArticleOwnerId(),0),curBox().hide()}})},getLang("global_cancel"))}),this._els.publishSaveButton.addEventListener("click",function(){t._editor.cancelSaveDraft(),lockButton(t._els.publishSaveButton),t._editor.save(!0,function(e,n,r,i){if(unlockButton(t._els.publishSaveButton),e)isString(e)&&t._publishNameInput.showError(e);else{hide(t._els.publishSaveButton),show(t._els.publishAttachBtn),show(t._els.publishDeleteButton);var o=t._editor.getPublishName(),a=t._editorOptions.urlPrefix+t._editor.getPublishName(),s=getLang("pages_article_published");s=s.replace("{url}",'<a target="_blank" href="_40'+t._editorOptions.ownerAlias+"-"+o+'">'+a+"</a>"),t._els.publishText.innerHTML=s,show(t._els.publishText),t._onListNeedUpdate(),cur.onAttachArticleToPost=function(){cur.wallAddMedia&&(t._onNeedLayersHide(),t._editorOptions.postData&&cur.postComposer&&window.Composer&&cur.oid&&(Composer.reset(cur.postComposer),cur.wallAddMedia.unchooseMedia(void 0,["photo","video"])),setTimeout(function(){cur.wallAddMedia.chooseMedia("article","",i)},100))},window.ArticleLayer&&ArticleLayer.clearPrepared(i.url)}},{ofm:t._editorOptions.canUseGroupPrivacy?intval(hasClass(t._els.publishOFMCheckbox,"on")):0})})},e.prototype._onShow=function(){this._updateCoverPhoto(),this._updatePublishButtonDisable()},e.prototype._updatePublishButtonDisable=function(){this.toggleEnabledPublishButton(!this._editor.isLimitsExceeded()&&this._publishNameInput.isNameCorrect()&&!this._editor.isLocked())},e.prototype.toggleEnabledPublishButton=function(e){this._els&&this._els.publishSaveButton&&toggleClass(this._els.publishSaveButton,"button_disabled",!e)},e.prototype._initCoverUpload=function(){var e=this;this._els.publishCoverCloseEl.addEventListener("click",function(){e._editor.setCoverPhoto(!1),e._updateCoverPhoto()});var t=this._editorOptions.photoUploadOptions;this._upload=Upload.init(this._els.publishUploadBtn,t.url,t.params,{file_name:"photo",file_size_limit:10485760,file_types_description:"Image files (*.jpg, *.jpeg, *.png, *.gif)",file_types:"*.jpg;*.JPG;*.jpeg;*.JPEG;*.png;*.PNG;*.gif;*.GIF",file_input:null,accept:"image/jpeg,image/png,image/gif",noCheck:!0,label:"<a>"+getLang("pages_articles_publish_cover_upload")+"</a>{file}",onUploadStart:function(){show(e._els.publishCoverEl),addClass(e._els.publishCoverEl,"article_ed_layer__publish_settings_cover--loading"),removeClass(e._els.publishCoverEl,"article_ed_layer__publish_settings_cover--loaded"),hide(e._els.publishUploadBtn)},onUploadComplete:function(t,n){n=JSON.parse(n),ajax.post("al_photos.php",extend({act:"choose_uploaded"},n),{onDone:function(t,n){e._editor.setCoverPhoto({id:t,data:n.editable}),e._updateCoverPhoto()}})},noFlash:1,max_files:1,chooseBox:1,clear:1,type:"photo",max_attempts:3,server:t.opts.server,error:t.opts.default_error,error_hash:t.opts.error_hash}),addEvent(this._els.publishUploadBtn,"click",function(){geByTag1("input",this).click()})},e.prototype._updateCoverPhoto=function(){var e=this._editor.getCoverPhoto();if(void 0===e&&(e=this._editor.getFirstCoverPhotoFromParagraphs()),e&&e.data&&isObject(e.data.sizes)){var t=Object(i.getAppropriateImage)(e.data.sizes,getSize(this._els.publishCoverEl)[0],!0),n=a(t,1),r=n[0];show(this._els.publishCoverEl),removeClass(this._els.publishCoverEl,"article_ed_layer__publish_settings_cover--loading"),addClass(this._els.publishCoverEl,"article_ed_layer__publish_settings_cover--loaded"),setStyle(this._els.publishCoverEl,"background-image","url("+r+")"),hide(this._els.publishUploadBtn)}else hide(this._els.publishCoverEl),removeClass(this._els.publishCoverEl,"article_ed_layer__publish_settings_cover--loading"),removeClass(this._els.publishCoverEl,"article_ed_layer__publish_settings_cover--loaded"),show(this._els.publishUploadBtn);this._editor.isLocked()&&(hide(this._els.publishUploadBtn),hide(this._els.publishCoverLabel)),this._setChanged()},e.prototype._setChanged=function(){show(this._els.publishSaveButton),hide(this._els.publishAttachBtn),hide(this._els.publishText)},e.prototype._init=function(){this._publishSettingsTooltip=new ElementTooltip(this._mountEl,{appendToParent:!0,cls:"eltt_fancy",centerShift:-90,offset:[0,-10],autoShow:!1,onFirstTimeShow:this._onFirstTimeShow.bind(this),onShow:this._onShow.bind(this)})},e.prototype._initNameInput=function(){var e=this;this._publishNameInput||(this._publishNameInput=new o["default"](this._els.publishNameInput,this._editor.getPublishName(),this._editorOptions.urlPrefix,this._editor.getArticleOwnerId(),this._editor.getArticleId(),function(t){e._editor.setPublishName(t),e._setChanged()},function(){e._updatePublishButtonDisable()}))},e}();t["default"]=s}});